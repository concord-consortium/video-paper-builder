<style type="text/css">
.ui-tabs-panel {text-align:center;height:300px;overflow-y:scroll;width:90%;}
.ui-tabs-selected {font-weight:bold;}
.ui-tabs-hide {display:none;}
.ui-tabs-nav {width:90%;clear:both;display:block;}
.ui-tabs-nav .tab {list-style:none;float:left;width:18%;text-align:center;}
</style>

<div class="content_details">
  <div class="top_curv">
    <div class="bottom_curv">
      <div class="intirior_details">
        <div class="span-24 last">
          <div class="span-24 last">
            <h2><%= @video_paper.title %></h2>
          </div>
          <div class="span-10">
            <h5>Produced by <%=h @video_paper.user.name%>, <%= @video_paper.format_created_date %></h5>
            <%= render :partial=>'video_information'%>    
            <%= render :partial=>'video_embed' %>
          </div>
          <div class="span-14 last">
            <div id="tabs">
              <ul>
              <% @video_paper.sections.each_with_index do |section, index| %>
                <li id="<%= dom_friend :id => section.title %>_tab" class="tab">
                  <a href="#<%= dom_friend :id => section.title %>"><%= section.title-%></a>
                </li>
              <% end %>
              </ul>
            </div>
            <% @video_paper.sections.each do |section| %>
              <div class="tab-content" id="<%= dom_friend :id => section.title %>">
                <% if owner_or_admin? %>
                  <p><%= edit_section_link(:video_paper => @video_paper, :section => section.title, :text => 'Edit') %></p>
                <% end %>
                <p><%= section.content -%></p>
              </div>
            <% end %>
          </div>
        </div>
        <% if owner_or_admin? %>
          <%= link_to 'Destroy', @video_paper, :method => :delete %>
        <% end %>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
//TODO: Namespace and organize onload for this stuff
// determine the tab index that should be selected based on the url
var selectInitialTab = function () {
  var tabIndex = 0;
  $j('li.tab a').each(
    function(idx,el){
      if(el.href != 'undefined' && el.href != '')
        if(window.location.href.match(el.href) != null) {
          tabIndex = idx;
        }
      }
    );    
  return tabIndex;
}
$j("#tabs").tabs({
  selected:selectInitialTab() // preselect tab
});
</script>
