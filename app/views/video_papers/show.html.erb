<style type="text/css">
.ui-tabs-panel {text-align:center;height:300px;overflow-y:scroll;width:100%;}
.ui-tabs-selected {font-weight:bold;}
.ui-tabs-hide {display:none;}
.ui-tabs-nav {width:100%;clear:both;display:block;}
.ui-tabs-nav .tab {list-style:none;float:left;width:22%;text-align:center;}
</style>

<div class="content_details bg_change">
  <div class="top_curv">
    <div class="bottom_curv">
      <div class="view_video">
        <h2><%=@video_paper.title%> <img src="/images/big_pencil_icon.png" alt=""  /></h2>
        <div class="produced_content">
          <p>Produced by <%=h @video_paper.user.name%>, <%= @video_paper.format_created_date %></p>
          <%= render :partial=>'video_information'%>  
          <div class="video"><%= render :partial=>'video_embed' %>  </div>
        </div>
        <div class="inner_blue_tab">
          <div id="tabs" class="top_tab">
            <ul>
              <% @video_paper.sections.each_with_index do |section, index| %>
                <li id="<%= dom_friend :id => section.title %>_tab" class="tab">
                  <a href="#<%= dom_friend :id => section.title %>"><span><%= section.title-%></span></a>
                </li>
              <% end %>              

            </ul>
          </div>
          <% @video_paper.sections.each do |section| %>
            <div class="tab_content" id="<%= dom_friend :id => section.title %>">
              <div class="into_content">
                <% if owner_or_admin? %>
                  <p><%= edit_section_link(:video_paper => @video_paper, :section => section.title, :text => 'Edit') %></p>
                <% end %>
                <p><%= section.content -%></p>
              </div>
            </div>
          <% end %>          
            <span class="clear"></span> </div>
        </div>
      </div>
      <span class="clear"></span> </div>
  </div>
</div>

        <% if owner_or_admin? %>
          <%= link_to 'Destroy', @video_paper, :method => :delete %>
        <% end %>
<script type="text/javascript">
//TODO: Namespace and organize onload for this stuff
// determine the tab index that should be selected based on the url
var selectInitialTab = function () {
  var tabIndex = 0;
  $j('li.tab a').each(
    function(idx,el){
      if(el.href != 'undefined' && el.href != '')
        if(window.location.href.match(el.href) != null) {
          tabIndex = idx;
        }
      }
    );    
  return tabIndex;
}
$j("#tabs").tabs({
  selected:selectInitialTab() // preselect tab
});
</script>
